---
import Layout from '../../layouts/MainLayout.astro';
import { t } from '../../i18n/i18n';
import type { Locale } from '../../i18n/i18n';
import type { HeaderColorConfig } from '../../config/headerColors';
import Breadcrumb from '../../components/common/Breadcrumb/Breadcrumb.astro';
import { fade } from 'astro:transitions';
import VideoHero from '../../components/common/VideoHero/VideoHero.astro';

// Importar estilos separados
import './styles.css';

export interface Props {
  currentLang: Locale;
  headerColorConfig: HeaderColorConfig;
}

const { currentLang, headerColorConfig } = Astro.props;

// Get translations from common.json
const title = t('about_us.title', { namespace: 'common', locale: currentLang });
const metaDescription = t('meta.about_us.description', { namespace: 'common', locale: currentLang });

// Importar contenido espec√≠fico de aboutus.json
const aboutUsContent = await import(`../../locales/${currentLang}/aboutus.json`);
const historyTitle = aboutUsContent.title;
const historySubtitle = aboutUsContent.subtitle;
const historyIntro = aboutUsContent.intro;
const historyItems = aboutUsContent.items;
const historyConclusion = aboutUsContent.conclusion;

// Video and image URLs for hero section
const videoUrl = 'https://snack.yummiespromociones.com/SnacksyummiesAssets/YUMMIES_INSTITUCIONAL_1920X1080.webm';
const fallbackImageUrl = 'https://snack.yummiespromociones.com/SnacksyummiesAssets/portada_video.webp';
---

<Layout title={title} class="bg-white" description={metaDescription}>
  <!-- Hero section with video background -->
  <VideoHero
    videoUrl={videoUrl}
    fallbackImageUrl={fallbackImageUrl}
    height="500px"
    title={historyTitle}
    subtitle={historySubtitle}
    overlayOpacity="30"
    textColor="text-white"
    showOverlay={false}
  />
  
  <div class="container mx-auto px-4 pt-6">
    <Breadcrumb bgColor="bg-white" textColor="text-gray-600" hoverColor="hover:text-primary" />
    
    <div class="text-center mb-12" transition:animate={fade({ duration: '0.5s' })}>
      <h2 class="font-sans text-3xl font-bold mb-4 text-primary">{historySubtitle}</h2>
      <div class="w-24 h-1 bg-primary mx-auto mb-8"></div>
    </div>

    <div class="about-us-content max-w-4xl mx-auto mb-16">
      <p class="mb-8 text-lg text-gray-700 leading-relaxed text-center">{historyIntro}</p>
      
      <div class="history-timeline">
        {historyItems.map((item: { year: string; image: string; text: string }) => (
          <div class="history-item" transition:animate={fade({ duration: '0.6s' })}>
            <div class="timeline-left">
              <div class="year-marker">
                <span class="year">{item.year}</span>
              </div>
            </div>
            
            <div class="timeline-center">
              <div class="timeline-line"></div>
              <div class="timeline-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10"></circle>
                  <path d="M12 8v8"></path>
                  <path d="M8 12h8"></path>
                </svg>
              </div>
            </div>
            
            <div class="timeline-right">
              <div class="history-content">
                <div class="history-text">
                  <p>{item.text}</p>
                </div>
                <div class="history-image">
                  <img src={item.image} alt={`Snacks Yummies en ${item.year}`} width="300" height="300" loading="lazy" />
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>
      
      <div class="conclusion mt-16 text-center">
        <p class="text-lg text-gray-700 leading-relaxed">{historyConclusion}</p>
      </div>
    </div>
  </div>
</Layout>



<script src="./scripts.js"></script>
