---
// Replace with your actual GTM ID
const gtmId = import.meta.env.PUBLIC_GTM_ID || 'GTM-XXXXXX';

// Validar que el GTM ID esté configurado
if (!gtmId || gtmId === 'GTM-XXXXXX') {
  console.warn('GTM ID no está configurado correctamente. Verifica tu archivo .env');
}
---

<!-- Google Tag Manager (noscript) -->
<noscript>
  <iframe 
    src={`https://www.googletagmanager.com/ns.html?id=${gtmId}`}
    height="0" 
    width="0" 
    style="display:none;visibility:hidden">
  </iframe>
</noscript>

<!-- Google Tag Manager - Deferred for performance -->
<script>
  window.dataLayer = window.dataLayer || [];
  window.dataLayer.push({
    'gtm.start': new Date().getTime(),
    event: 'gtm.js'
  });
  
  // Load GTM after page load to improve LCP
  window.addEventListener('load', function() {
    const script = document.createElement('script');
    script.src = `https://www.googletagmanager.com/gtm.js?id=${gtmId}`;
    script.async = true;
    document.head.appendChild(script);
  });
</script>
