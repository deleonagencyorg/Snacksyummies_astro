---
// src/components/common/ConfettiAnimation/ConfettiAnimation.astro
export interface Props {
  side?: 'left' | 'right';
  class?: string;
}

const { side = 'left', class: className = '' } = Astro.props;
---

<div class={`confetti-container ${side} ${className}`} data-confetti-side={side}>
  <!-- Confetti particles -->
  <div class="confetti-piece" style="--delay: 0s; --color: #ff6b6b;"></div>
  <div class="confetti-piece" style="--delay: 0.2s; --color: #4ecdc4;"></div>
  <div class="confetti-piece" style="--delay: 0.4s; --color: #45b7d1;"></div>
  <div class="confetti-piece" style="--delay: 0.6s; --color: #f9ca24;"></div>
  <div class="confetti-piece" style="--delay: 0.8s; --color: #f0932b;"></div>
  <div class="confetti-piece" style="--delay: 1s; --color: #eb4d4b;"></div>
  <div class="confetti-piece" style="--delay: 1.2s; --color: #6c5ce7;"></div>
  <div class="confetti-piece" style="--delay: 1.4s; --color: #a29bfe;"></div>
  <div class="confetti-piece" style="--delay: 1.6s; --color: #fd79a8;"></div>
  <div class="confetti-piece" style="--delay: 1.8s; --color: #00b894;"></div>
  <div class="confetti-piece" style="--delay: 2s; --color: #e17055;"></div>
  <div class="confetti-piece" style="--delay: 2.2s; --color: #81ecec;"></div>
</div>

<style>
  .confetti-container {
    position: absolute;
    left: 0;
    width: 100%;
    height: 100px;
    pointer-events: none;
    overflow: hidden;
  }

  .confetti-container.left {
    top: 10%;
  }

  .confetti-container.right {
    bottom: 10%;
  }

  .confetti-piece {
    position: absolute;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background-color: var(--color);
    animation: confetti-fall 3s linear infinite;
    animation-delay: var(--delay);
    opacity: 0;
  }

  .confetti-piece:nth-child(2n) {
    width: 6px;
    height: 6px;
    border-radius: 0;
    transform: rotate(45deg);
  }

  .confetti-piece:nth-child(3n) {
    width: 4px;
    height: 12px;
    border-radius: 2px;
  }

  .confetti-piece:nth-child(4n) {
    width: 10px;
    height: 4px;
    border-radius: 2px;
  }

  @keyframes confetti-fall {
    0% {
      transform: translateY(-100vh) rotate(0deg);
      opacity: 1;
    }
    10% {
      opacity: 1;
    }
    90% {
      opacity: 1;
    }
    100% {
      transform: translateY(100vh) rotate(720deg);
      opacity: 0;
    }
  }

  /* Randomize positions */
  .confetti-piece:nth-child(1) { left: 10%; animation-duration: 3.5s; }
  .confetti-piece:nth-child(2) { left: 20%; animation-duration: 3.2s; }
  .confetti-piece:nth-child(3) { left: 30%; animation-duration: 3.8s; }
  .confetti-piece:nth-child(4) { left: 40%; animation-duration: 3.1s; }
  .confetti-piece:nth-child(5) { left: 50%; animation-duration: 3.6s; }
  .confetti-piece:nth-child(6) { left: 60%; animation-duration: 3.3s; }
  .confetti-piece:nth-child(7) { left: 70%; animation-duration: 3.7s; }
  .confetti-piece:nth-child(8) { left: 80%; animation-duration: 3.4s; }
  .confetti-piece:nth-child(9) { left: 15%; animation-duration: 3.9s; }
  .confetti-piece:nth-child(10) { left: 25%; animation-duration: 3.0s; }
  .confetti-piece:nth-child(11) { left: 35%; animation-duration: 3.5s; }
  .confetti-piece:nth-child(12) { left: 75%; animation-duration: 3.2s; }

  /* Mobile responsiveness */
  @media (max-width: 768px) {
    .confetti-container {
      width: 60px;
    }
    
    .confetti-container.left {
      left: 5%;
    }
    
    .confetti-container.right {
      right: 5%;
    }
    
    .confetti-piece {
      width: 6px;
      height: 6px;
    }
    
    .confetti-piece:nth-child(2n) {
      width: 4px;
      height: 4px;
    }
    
    .confetti-piece:nth-child(3n) {
      width: 3px;
      height: 8px;
    }
    
    .confetti-piece:nth-child(4n) {
      width: 8px;
      height: 3px;
    }
  }
</style>
